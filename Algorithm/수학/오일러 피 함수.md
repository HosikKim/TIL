# 오일러 피 함수 (Euler's Phi Function)

## 개념
1부터 N까지 범위에서 N과 서로소인 자연수의 개수를 구하는 함수

## 목적
* 정수론 문제에서 서로소 개수 계산
* 암호학(RSA 알고리즘)의 핵심 수식
* 특정 범위의 모든 오일러 피 값을 효율적으로 구하기 위해

## 핵심 개념

### 서로소(Coprime)란?
**두 수의 공약수가 1뿐인 관계**

| 수 쌍 | 공약수 | 서로소 여부 |
|-------|--------|-------------|
| (2, 3) | 1 | ✅ 서로소 |
| (4, 6) | 1, 2 | ❌ 서로소 아님 |
| (5, 6) | 1 | ✅ 서로소 |

### 표기법
* `φ(N)` 또는 `P[N]`
* φ(6) = 2 → 1~6 중 6과 서로소: {1, 5}

## 알고리즘 원리

### 수행 과정
```
1. 초기화: 구하고자 하는 범위만큼 배열을 생성하고 자기 자신의 인덱스 값으로 초기화
2. 소수 찾기: 2부터 시작해 현재 배열의 값과 인덱스가 같으면 (= 소수일 때)
3. 배수 처리: 현재 선택된 소수(K)의 배수에 해당하는 수를 끝까지 탐색하며 `P[i] = P[i] - P[i]/K` 연산 수행
4. 반복: 배열 끝까지 2~3 과정을 반복
```

### 핵심 공식
```
P[i] = P[i] - P[i] / K
     = P[i] × (1 - 1/K)
     = P[i] × (K-1) / K
```

## 동작 예시 (P[15] 계산)

### 초기 상태
```
인덱스: 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15
P[i]:   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15
```

### Step 1: K=2 (소수) 처리
2의 배수들에 `P[i] = P[i] - P[i]/2` 적용
```
인덱스: 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15
P[i]:   1  1  3  2  5  3  7  4  9  5 11  6 13  7 15
        ↑  ↓     ↓     ↓     ↓     ↓     ↓     ↓  ↓
```

### Step 2: K=3 (소수) 처리
3의 배수들에 `P[i] = P[i] - P[i]/3` 적용
```
인덱스: 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15
P[i]:   1  1  2  2  5  2  7  4  6  5 11  4 13  7 10
           ↓           ↓        ↓        ↓        ↓
```

### 최종 결과
```
인덱스: 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15
P[i]:   1  1  2  2  4  2  6  4  6  4 10  4 12  6  8
```

### 검증 예시

| N | φ(N) | N과 서로소인 수 |
|---|------|-----------------|
| 6 | 2 | 1, 5 |
| 8 | 4 | 1, 3, 5, 7 |
| 12 | 4 | 1, 5, 7, 11 |

## 코드 예시

```java
int[] phi = new int[n + 1];

// 1. 자기 자신으로 초기화
for (int i = 1; i <= n; i++) {
    phi[i] = i;
}

// 2. 에라토스테네스의 체 방식으로 처리
for (int i = 2; i <= n; i++) {
    if (phi[i] == i) {  // i가 소수일 때
        for (int j = i; j <= n; j += i) {
            phi[j] = phi[j] - phi[j] / i;
        }
    }
}
```

## 시간 복잡도

| 복잡도 유형 | 값 | 설명 |
|-------------|-----|------|
| 시간 복잡도 | O(N log log N) | 에라토스테네스의 체와 유사 |
| 공간 복잡도 | O(N) | 배열 하나 필요 |
| 단일 계산 | O(√N) | 한 개의 φ(N)만 구할 때 |

## 수학적 성질

### 중요 공식
* **소수 p**: φ(p) = p - 1
* **소수의 거듭제곱**: φ(p^k) = p^k - p^(k-1) = p^k × (1 - 1/p)
* **서로소인 두 수**: φ(a × b) = φ(a) × φ(b) (a, b가 서로소)

## 장점
* 1~N 범위의 모든 오일러 피 값을 한 번에 계산
* 에라토스테네스의 체와 유사한 효율성
* 정수론 문제 해결에 필수적

## 단점 및 주의사항
* 배열 크기만큼 메모리 필요
* 단일 값만 필요할 때는 비효율적
* 나눗셈 연산 시 정수 나눗셈 주의 (소수점 버림)

## 사용 가이드

### 언제 사용하면 좋은가?
* 특정 범위의 모든 오일러 피 값이 필요할 때
* 서로소 개수를 여러 번 계산해야 할 때
* 정수론, 조합론 문제

### 언제 사용하지 말아야 하는가?
* 단일 φ(N) 값만 필요할 때 → 소인수분해로 직접 계산이 더 효율적
* 메모리 제약이 심할 때

## 응용 분야
* **RSA 암호**: φ(N) = (p-1)(q-1) 계산
* **오일러 정리**: a^φ(N) ≡ 1 (mod N)
* **페르마의 소정리**: a^(p-1) ≡ 1 (mod p)
* 조합론, 정수론 문제

## 참고 자료
* [위키백과 - 오일러 피 함수](https://ko.wikipedia.org/wiki/오일러_파이_함수)
* 백준 - 11689번(GCD(n, k) = 1)