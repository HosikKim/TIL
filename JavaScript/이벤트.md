# 이벤트 (Event)

## 개념

웹 페이지에서 발생하는 **사용자 동작이나 상태 변화**를 감지하고 처리하는 메커니즘

## 주요 이벤트 유형

| 분류 | 이벤트 | 설명 |
|------|--------|------|
| 마우스 | click, dblclick | 클릭, 더블클릭 |
| | mouseover, mouseout | 마우스 올림, 벗어남 |
| 키보드 | keydown, keyup | 키 누름, 뗌 |
| | keypress | 키 입력 |
| 폼 | submit, change | 제출, 값 변경 |
| | focus, blur | 포커스 획득, 상실 |
| 윈도우 | load, resize | 페이지 로드, 크기 변경 |
| | scroll | 스크롤 |

## 이벤트 등록

### 1. HTML 속성 (권장 ❌)
```html
<button onclick="alert('클릭')">버튼</button>
```

### 2. DOM 프로퍼티
```javascript
button.onclick = function() {
  alert('클릭');
};
```

### 3. addEventListener (권장 ✅)
```javascript
button.addEventListener('click', function() {
  alert('클릭');
});

// 화살표 함수
button.addEventListener('click', () => {
  alert('클릭');
});

// 여러 리스너 등록 가능
button.addEventListener('click', handler1);
button.addEventListener('click', handler2);

// 리스너 제거
button.removeEventListener('click', handler1);
```

## 이벤트 객체
```javascript
button.addEventListener('click', (event) => {
  console.log(event.type);           // 'click'
  console.log(event.target);         // 클릭된 요소
  console.log(event.currentTarget);  // 리스너가 등록된 요소
});
```

### 주요 메서드
```javascript
event.preventDefault();        // 기본 동작 방지
event.stopPropagation();      // 이벤트 전파 중단
```

## 이벤트 전파

### 버블링 (Bubbling) - 기본값
```
자식 → 부모 → 조상 (아래에서 위로)

<div id="parent">
  <button id="child">클릭</button>
</div>

child 클릭 → child 이벤트 → parent 이벤트
```
```javascript
document.getElementById('parent').addEventListener('click', () => {
  console.log('부모 클릭');
});

document.getElementById('child').addEventListener('click', (e) => {
  console.log('자식 클릭');
  e.stopPropagation();  // 부모로 전파 중단
});
```

### 캡처링 (Capturing)
```
조상 → 부모 → 자식 (위에서 아래로)
```
```javascript
parent.addEventListener('click', () => {
  console.log('부모 (캡처링)');
}, { capture: true });
```

## 이벤트 위임

**개념**: 여러 자식 요소의 이벤트를 **부모 요소 하나**에서 처리
```html
<ul id="list">
  <li>항목 1</li>
  <li>항목 2</li>
  <li>항목 3</li>
</ul>
```
```javascript
// ❌ 각 li마다 리스너 등록 (비효율)
document.querySelectorAll('li').forEach(li => {
  li.addEventListener('click', () => {
    console.log('클릭:', li.textContent);
  });
});

// ✅ 부모에서 한 번만 등록 (효율적)
document.getElementById('list').addEventListener('click', (e) => {
  if (e.target.tagName === 'LI') {
    console.log('클릭:', e.target.textContent);
  }
});
```

**장점**:
- 메모리 절약
- 동적 추가된 요소도 자동 처리

## 기본 동작 방지
```javascript
// 링크 이동 방지
link.addEventListener('click', (e) => {
  e.preventDefault();
  console.log('이동 안 함');
});

// 폼 제출 방지
form.addEventListener('submit', (e) => {
  e.preventDefault();
  console.log('제출 안 함');
});

// 우클릭 메뉴 방지
document.addEventListener('contextmenu', (e) => {
  e.preventDefault();
});
```

## 자주 사용하는 이벤트

### 클릭
```javascript
button.addEventListener('click', () => {
  console.log('클릭됨');
});
```

### 입력
```javascript
input.addEventListener('input', (e) => {
  console.log('입력값:', e.target.value);
});

input.addEventListener('change', (e) => {
  console.log('값 변경:', e.target.value);
});
```

### 키보드
```javascript
input.addEventListener('keydown', (e) => {
  console.log('키:', e.key);  // 'Enter', 'a', 'ArrowUp'
  
  if (e.key === 'Enter') {
    console.log('엔터 입력');
  }
});
```

### 스크롤
```javascript
window.addEventListener('scroll', () => {
  console.log('스크롤 위치:', window.scrollY);
});
```

## 성능 최적화

### Debounce (디바운스)
마지막 호출 후 일정 시간 후 실행
```javascript
function debounce(func, delay) {
  let timer;
  return function(...args) {
    clearTimeout(timer);
    timer = setTimeout(() => func(...args), delay);
  };
}

// 검색 입력 예시
input.addEventListener('input', debounce((e) => {
  console.log('검색:', e.target.value);
}, 500));
```

### Throttle (쓰로틀)
일정 시간마다 한 번만 실행
```javascript
function throttle(func, delay) {
  let timer;
  return function(...args) {
    if (!timer) {
      timer = setTimeout(() => {
        func(...args);
        timer = null;
      }, delay);
    }
  };
}

// 스크롤 예시
window.addEventListener('scroll', throttle(() => {
  console.log('스크롤');
}, 200));
```

## 참고 자료

- [MDN Event Reference](https://developer.mozilla.org/ko/docs/Web/Events)
- [JavaScript.info - 이벤트](https://ko.javascript.info/events)